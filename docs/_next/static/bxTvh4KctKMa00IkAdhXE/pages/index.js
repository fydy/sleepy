(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{RNiq:function(e,t,a){"use strict";a.r(t);var n=a("ln6h"),l=a.n(n),s=a("O40h"),c=a("q1tI"),r=a.n(c),i=a("HctW"),o=a("dfwq"),d=a("0iUn"),m=a("sLSF"),u=a("MI3g"),p=a("a7VT"),h=a("Tit0"),g=a("YFqc"),E=a.n(g),f=a("bMwp"),v=a("Z69C"),N=a("Qi1R"),w=function(){return r.a.createElement("div",{className:"post-item"},r.a.createElement("div",{className:"poster loading",style:{height:80}}),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"title loading",style:{height:20,marginBottom:5,width:"80%"}}),r.a.createElement("div",{className:"excerpt"},r.a.createElement("div",{className:"loading",style:{height:15,marginBottom:5,width:"100%"}}),r.a.createElement("div",{className:"loading",style:{height:15,marginBottom:5,width:"100%"}}),r.a.createElement("div",{className:"loading",style:{height:15,width:"50%"}}))))},b=function(e){function t(e){var a;return Object(d.default)(this,t),(a=Object(u.default)(this,Object(p.default)(t).call(this,e))).state={loadState:!1,loadEnd:!1,page:1,loadText:"加载更多",posts:[]},a}return Object(h.default)(t,e),Object(m.default)(t,[{key:"componentDidMount",value:function(){var e=this;f.a.byPage({page:this.state.page}).then(function(t){e.setState(function(){return{posts:t}})})}},{key:"loadMore",value:function(){var e=this;this.state.loadState||(this.setState(function(){return{loadState:!0,loadText:"加载中..."}}),f.a.byPage({page:this.state.page+1}).then(function(t){e.setState(function(e){return{loadState:!1,loadText:"加载更多",loadEnd:t.length<v.post.pageSize,page:e.page,posts:[].concat(Object(o.default)(e.posts),Object(o.default)(t))}})}))}},{key:"render",value:function(){var e=this.state,t=e.posts,a=e.loadText,n=e.loadEnd;return t.length?r.a.createElement("div",{className:"post-list"},t.map(function(e){return r.a.createElement("div",{key:e.id,className:"post-item"},r.a.createElement(E.a,{href:"post?id=".concat(e.id)},r.a.createElement("a",null,r.a.createElement("div",{className:"poster",style:{backgroundImage:"url(".concat(e.poster||v.images.poster||"/static/poster.png",")")}}))),r.a.createElement("div",{className:"content"},r.a.createElement(E.a,{href:"post?id=".concat(e.id)},r.a.createElement("a",{className:"title"},e.title)),r.a.createElement("div",{className:"excerpt"},e.excerpt)),r.a.createElement("div",{className:"time"},Object(N.b)(e.created_at)),r.a.createElement("div",{className:"tags"},e.tags.map(function(e){return r.a.createElement("span",{className:"tag"},"#",e)})))}),n?r.a.createElement("div",{className:"loadEnd"},"加载完毕"):r.a.createElement("div",{className:"loadMore",onClick:this.loadMore.bind(this)},a)):r.a.createElement("div",{className:"post-list"},r.a.createElement(w,null),r.a.createElement(w,null),r.a.createElement(w,null))}}]),t}(r.a.Component),y=function(e){var t=e.query;return r.a.createElement("div",{className:"wrapper"},r.a.createElement(i.a,null,r.a.createElement("div",{className:"page page-index"},r.a.createElement(b,{query:t}))))};y.getInitialProps=function(){var e=Object(s.default)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.query,e.abrupt("return",{query:a});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();t.default=y},vlRD:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){var e=a("RNiq");return{page:e.default||e}}])}},[["vlRD",1,0]]]);