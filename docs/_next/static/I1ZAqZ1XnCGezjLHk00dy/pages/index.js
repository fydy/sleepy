(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{RNiq:function(e,t,a){"use strict";a.r(t);var n=a("ln6h"),r=a.n(n),c=a("O40h"),l=a("q1tI"),s=a.n(l),i=a("HctW"),o=a("dfwq"),u=a("0iUn"),d=a("sLSF"),m=a("MI3g"),p=a("a7VT"),h=a("Tit0"),f=a("YFqc"),E=a.n(f),g=a("bMwp"),v=a("Z69C"),y=a("Qi1R"),w=a("GRpk"),b=function(){return s.a.createElement(w.a,{height:80,width:400},s.a.createElement("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"90",height:"65"}),s.a.createElement("rect",{x:"100",y:"0",rx:"3",ry:"3",width:"200",height:"17"}),s.a.createElement("rect",{x:"100",y:"20",rx:"3",ry:"3",width:"300",height:"12"}),s.a.createElement("rect",{x:"100",y:"35",rx:"3",ry:"3",width:"300",height:"12"}),s.a.createElement("rect",{x:"100",y:"50",rx:"3",ry:"3",width:"250",height:"12"}))},x=function(e){function t(e){var a;return Object(u.default)(this,t),(a=Object(m.default)(this,Object(p.default)(t).call(this,e))).state={loadState:!1,loadEnd:!1,page:1,loadText:"加载更多",posts:[]},a}return Object(h.default)(t,e),Object(d.default)(t,[{key:"componentDidMount",value:function(){var e=this;g.a.byPage({page:this.state.page}).then(function(t){e.setState(function(){return{posts:t}})})}},{key:"loadMore",value:function(){var e=this;this.state.loadState||(this.setState(function(){return{loadState:!0,loadText:"加载中..."}}),g.a.byPage({page:this.state.page+1}).then(function(t){e.setState(function(e){return{loadState:!1,loadText:"加载更多",loadEnd:t.length<v.post.pageSize,page:e.page,posts:[].concat(Object(o.default)(e.posts),Object(o.default)(t))}})}))}},{key:"render",value:function(){var e=this.state,t=e.posts,a=e.loadText,n=e.loadEnd;return t.length?s.a.createElement("div",{className:"post-list"},t.map(function(e){return s.a.createElement("div",{key:e.id,className:"post-item"},s.a.createElement(E.a,{href:"post?id=".concat(e.id)},s.a.createElement("a",null,s.a.createElement("div",{className:"poster",style:{backgroundImage:"url(".concat(e.poster||v.images.poster||"/static/poster.png",")")}}))),s.a.createElement("div",{className:"content"},s.a.createElement(E.a,{href:"post?id=".concat(e.id)},s.a.createElement("a",{className:"title"},e.title)),s.a.createElement("div",{className:"excerpt"},e.excerpt)),s.a.createElement("div",{className:"time"},Object(y.b)(e.created_at)),s.a.createElement("div",{className:"tags"},e.tags.map(function(e){return s.a.createElement("span",{className:"tag"},"#",e)})))}),n?s.a.createElement("div",{className:"loadEnd"},"加载完毕"):s.a.createElement("div",{className:"loadMore",onClick:this.loadMore.bind(this)},a)):s.a.createElement("div",{className:"post-list"},s.a.createElement(b,null),s.a.createElement(b,null),s.a.createElement(b,null))}}]),t}(s.a.Component),N=function(e){var t=e.query;return s.a.createElement("div",{className:"wrapper"},s.a.createElement(i.a,null,s.a.createElement("div",{className:"page page-index"},s.a.createElement(x,{query:t}))))};N.getInitialProps=function(){var e=Object(c.default)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.query,e.abrupt("return",{query:a});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();t.default=N},vlRD:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){var e=a("RNiq");return{page:e.default||e}}])}},[["vlRD",1,0]]]);